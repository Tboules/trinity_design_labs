---
import NeatBackground from "../components/NeatBackground";
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
import arrowBlackIcon from "../assets/icons/Arrow_black.svg";
import arrowWhiteIcon from "../assets/icons/Arrow_white.svg";
import card1 from "../assets/card_images/card_one.jpg";
import card2 from "../assets/card_images/card_two.jpg";
import card3 from "../assets/card_images/card_three.jpg";
import card4 from "../assets/card_images/card_four.jpg";

const allOurWork = await getCollection("our_work");
---

<Layout>
  <section
    class="relative flex min-h-screen items-center justify-center overflow-hidden pb-20 text-center lg:pb-0"
  >
    <!-- Animated background -->
    <NeatBackground client:only="react" />

    <!-- Gradient overlay -->
    <div
      class="absolute bottom-0 h-[449px] w-full bg-[linear-gradient(180deg,rgba(244,244,244,0)_30.29%,#F4F4F4_100%)]"
    >
    </div>

    <!-- Content -->
    <div class="relative z-10 px-6">
      <h1
        class="mt-[155px] mb-[70px] text-[43px] leading-[100%] font-medium lg:mt-0 lg:mb-0 lg:text-[83px] lg:leading-20"
      >
        Create Your <br />
        <span class="font-bold text-white">Digital Presence;</span>
        <br />
        Transform Your Business.
      </h1>

      <div class="font-montserrat mx-auto max-w-[674px]">
        <p
          class="mt-15 text-sm font-semibold text-white lg:text-xl lg:font-medium"
        >
          Scale Your Business with Custom Software Solutions
        </p>
        <p class="mt-2 text-sm text-black lg:text-base">
          At Trinity Design Labs, we deliver high-quality, custom software,
          website design, and E-commerce solutions that drive business growth.
          Experience exceptional performance, timely delivery, and sustained
          support with our expert team.
        </p>
      </div>

      <div
        class="mt-16 flex justify-center gap-2.5 sm:flex-row lg:mt-12 lg:gap-5"
      >
        <a
          href="#contact"
          class="rounded-lg bg-black px-5 py-3 text-[14px] font-medium text-white lg:px-10 lg:py-3 lg:text-[16px]"
        >
          Book A Consultation
        </a>
        <a
          href="#case"
          class="rounded-lg border border-black bg-transparent px-5 py-3 text-[14px] font-medium text-black lg:px-20 lg:py-3 lg:text-[16px] lg:font-semibold"
        >
          Case Studies
        </a>
      </div>
    </div>
  </section>
  <section id="what" class="container mx-auto px-5 sm:px-0">
    <div class="pt-[120px]">
      <h2 class="text-center text-6xl leading-[100%] font-medium uppercase">
        What We Do
      </h2>
      <!-- text-[#131212] -->
      <ul id="cards" class="mt-[60px] mb-[4vw] pb-[calc(4*1em)]">
        <!-- Card 1 -->
        <li id="card-1" class="sticky top-28 mb-3 h-[500px]">
          <div
            class="card-content relative h-full rounded-[45px] bg-cover bg-center bg-no-repeat p-13 text-white"
            style={`background-image: url(${card1.src});`}
          >
            <div
              class="overlay absolute inset-0 z-0 rounded-[45px] bg-black/40"
            >
            </div>
            <div class="relative z-10">
              <h2 class="mb-2.5 text-4xl font-bold">
                Transform Your Ideas into a Digital Reality
              </h2>
              <p class="text-lg">
                We specialize in custom software development, website design,
                and E-commerce solutions tailored to meet your unique business
                needs. Our team of experts ensures that your business doesn’t
                have to choose between quality, speed, and support.
              </p>
              <a class="mt-2.5 flex items-center gap-3.5">
                <div
                  class="flex h-10 w-10 items-center justify-center rounded-full bg-white"
                >
                  <img src=`${arrowBlackIcon.src}` alt="" />
                </div>
                <div class="">Explore Our Services</div>
              </a>
            </div>
          </div>
        </li>

        <!-- Card 2 -->
        <li id="card-2" class="sticky top-28 mb-3 h-[500px]">
          <div
            class="card-content relative h-full rounded-[45px] border-[1px] border-[#000000] bg-cover bg-center bg-no-repeat p-13 text-[#131212] transition-all duration-700"
            style={`background-image: url(${card2.src});`}
          >
            <div class="overlay absolute inset-0 z-0 rounded-[45px] bg-white">
            </div>
            <div class="relative z-10">
              <h2 class="mb-2.5 text-4xl font-bold text-[#57C5C8]">
                Transform Your Ideas into a Digital Reality
              </h2>
              <p class="text-lg">
                We specialize in custom software development, website design,
                and E-commerce solutions tailored to meet your unique business
                needs. Our team of experts ensures that your business doesn’t
                have to choose between quality, speed, and support.
              </p>
              <a class="mt-2.5 flex items-center gap-3.5">
                <div
                  class="arrow-wrapper flex h-10 w-10 items-center justify-center rounded-full bg-black"
                >
                  <img src=`${arrowWhiteIcon.src}` alt="" />
                </div>
                <div class="">Explore Our Services</div>
              </a>
            </div>
          </div>
        </li>

        <!-- Card 3 -->
        <li id="card-3" class="sticky top-28 mb-3 h-[500px]">
          <div
            class="card-content relative h-full rounded-[45px] border-[1px] border-[#000000] bg-cover bg-center bg-no-repeat p-13 text-[#131212] transition-all duration-700"
            style={`background-image: url(${card3.src});`}
          >
            <div class="overlay absolute inset-0 rounded-[45px] bg-white"></div>
            <div class="relative z-10">
              <h2 class="mb-2.5 text-4xl font-bold text-[#57C5C8]">
                Transform Your Ideas into a Digital Reality
              </h2>
              <p class="text-lg">
                We specialize in custom software development, website design,
                and E-commerce solutions tailored to meet your unique business
                needs. Our team of experts ensures that your business doesn’t
                have to choose between quality, speed, and support.
              </p>
              <a class="mt-2.5 flex items-center gap-3.5">
                <div
                  class="arrow-wrapper flex h-10 w-10 items-center justify-center rounded-full bg-black"
                >
                  <img src=`${arrowWhiteIcon.src}` alt="" />
                </div>
                <div class="">Explore Our Services</div>
              </a>
            </div>
          </div>
        </li>

        <!-- Card 4 -->
        <li id="card-4" class="sticky top-28 mb-3 h-[500px]">
          <div
            class="card-content relative h-full rounded-[45px] border-[1px] border-[#000000] bg-cover bg-center bg-no-repeat p-13 text-[#131212] transition-all duration-700"
            style={`background-image: url(${card4.src});`}
          >
            <div class="overlay absolute inset-0 rounded-[45px] bg-white"></div>
            <div class="relative z-10">
              <h2 class="mb-2.5 text-4xl font-bold text-[#57C5C8]">
                Transform Your Ideas into a Digital Reality
              </h2>
              <p class="text-lg">
                We specialize in custom software development, website design,
                and E-commerce solutions tailored to meet your unique business
                needs. Our team of experts ensures that your business doesn’t
                have to choose between quality, speed, and support.
              </p>
              <a class="mt-2.5 flex items-center gap-3.5">
                <div
                  class="arrow-wrapper flex h-10 w-10 items-center justify-center rounded-full bg-black"
                >
                  <img src=`${arrowWhiteIcon.src}` alt="" />
                </div>
                <div class="">Explore Our Services</div>
              </a>
            </div>
          </div>
        </li>
      </ul>
    </div>
  </section>
  <section>
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
  </section>

  <script>
    const cards = document.querySelectorAll("#cards li");

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.intersectionRatio === 1) {
            entry.target.classList.add("active-card");
          } else {
            entry.target.classList.remove("active-card");
          }
        });
      },
      {
        threshold: 1, // fully visible in viewport
        rootMargin: "-112px 0px 0px 0px", // adjust for sticky offset (top-28 = 112px)
      },
    );

    cards.forEach((card) => observer.observe(card));
  </script>
</Layout>
